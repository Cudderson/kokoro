{% extends 'kokoro_app/base.html' %}

{% block content %}

<h3>Today:</h3>
<h2>{{ all_daily.daily_mind.0 }}</h2>
<h2>{{ all_daily.daily_body.0 }}</h2>
<h2>{{ all_daily.daily_soul.0 }}</h2>

<!--Evaluate string representation of Python bool-->
{% if balance_bool == 'True' %}
    <p>You have found balance today.</p>
{% elif balance_bool == 'False' %}
    <p>Still finding balance...</p>
{% endif %}

<form action="{% url 'kokoro_app:home' %}" method="post">
  {% csrf_token %}
  <div class="btn-group btn-group-toggle btn-group-md w-50" data-toggle="collapse" data-target="#add">
    <label class="btn btn-info" for="id_activity_1">
      <input type="radio" name="activity" value="mind" class="form-control" required="" id="id_activity_1">{{ form.activity.1 }}
    </label>
    <label class="btn btn-danger" for="id_activity_2">
      <input type="radio" name="activity" value="body" class="form-control" required="" id="id_activity_2">{{ form.activity.2 }}
    </label>
    <label class="btn btn-warning" for="id_activity_3">
      <input type="radio" name="activity" value="soul" class="form-control" required="" id="id_activity_3">{{ form.activity.3 }}
    </label>
  </div>

  <div class="input-group mb-3 w-50 collapse" id="add">
      <input type="text" name="description" class="form-control" maxlength="100" required="" id="id_description" placeholder="Describe your activity...">
      <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="submit" name="submit">Add Activity</button>
      </div>
  </div>
</form>

<div>
    <svg viewBox="0 0 900 901">
        <rect x="0" y="0" height="301" width="300" stroke="goldenrod" stroke-width="2" fill="none"></rect>

        <polygon fill="yellow" points="0,300 300,300 150,40.1925"></polygon>

        <!--make smaller triangles overlay-->
        <polygon class="tri tri-1" fill="black" stroke="black" stroke-width="1" points="75,170.01 225,170.01 150,40.1925"></polygon>

        <polygon class="tri tri-2" fill="black" stroke="black" stroke-width="1" points="0,300 150,300 75,170.01"></polygon>

        <polygon class="tri tri-3" fill="black" stroke="black" stroke-width="1" points="150,300 300,300 225,170.01"></polygon>

        <text x="130" y="135">Mind</text>
        <text x="54" y="265">Body</text>
        <text x="209" y="265">Soul</text>
    </svg>
</div>

<!--apply new css class to triangles referencing fulfilled activities-->
<script>
    let tri = document.getElementsByClassName('tri');

    var mind = "{{ all_daily.daily_mind.0|safe }}";
    var body = "{{ all_daily.daily_body.0|safe }}";
    var soul = "{{ all_daily.daily_soul.0|safe }}";

    let activities = [mind, body, soul];

    for (var i = 0; i < 3; i++)
    {
        if (activities[i])
        {
            tri[i].classList.add("completed_act");
        }
    }
</script>
{% endblock content %}