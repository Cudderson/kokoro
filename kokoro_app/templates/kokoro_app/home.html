{% extends 'kokoro_app/base.html' %}

{% block content %}

<div class="home-grid">
    <!--testing flexbox to avoid unwanted gaps-->
    <div class="activity-form">
        <form action="{% url 'kokoro_app:home' %}" method="post">
            {% csrf_token %}
            <div class="activity-select"> <!--flexbox-->
                <input class="activity-radio" type="radio" name="activity" value="mind" required="" id="id_activity_1">
                <label class="activity-label" onclick="collapse()" for="id_activity_1">{{ form.activity.1 }}</label>
                <input class="activity-radio" type="radio" name="activity" value="body" required="" id="id_activity_2">
                <label class="activity-label" onclick="collapse()" for="id_activity_2">{{ form.activity.2 }}</label>
                <input class="activity-radio" type="radio" name="activity" value="soul" required="" id="id_activity_3">
                <label class="activity-label" onclick="collapse()" for="id_activity_3">{{ form.activity.3 }}</label>
            </div>
            <div class="activity-submit">
                  <input type="text" name="description" maxlength="100" required="" id="id_description" placeholder="Describe your activity...">
                  <button type="submit" name="submit">Add Activity</button>
            </div>
        </form>
    </div>
    <div class="grid-item-daily">
        <h3>Today:</h3>
        <h2>{{ all_daily.daily_mind.0 }}</h2>
        <h2>{{ all_daily.daily_body.0 }}</h2>
        <h2>{{ all_daily.daily_soul.0 }}</h2>
    </div>

    <!--Evaluate string representation of Python bool-->
    <div class="grid-balance">
        {% if balance_bool == 'True' %}
            <p>You have found balance today.</p>
        {% elif balance_bool == 'False' %}
            <p>Still finding balance...</p>
        {% endif %}
    </div>


    <div class="svg-container">
        <svg id="svg" width=400 height=400 viewBox="0 0 300 301">
            <rect x="0" y="0" height="301" width="300" stroke="goldenrod" stroke-width="2" fill="none"></rect>

            <polygon fill="yellow" points="0,300 300,300 150,40.1925"></polygon>

            <!--make smaller triangles overlay-->
            <polygon class="tri tri-1" fill="black" stroke="black" stroke-width="1" points="75,170.01 225,170.01 150,40.1925"></polygon>

            <polygon class="tri tri-2" fill="black" stroke="black" stroke-width="1" points="0,300 150,300 75,170.01"></polygon>

            <polygon class="tri tri-3" fill="black" stroke="black" stroke-width="1" points="150,300 300,300 225,170.01"></polygon>

            <text x="130" y="135">Mind</text>
            <text x="54" y="265">Body</text>
            <text x="209" y="265">Soul</text>
        </svg>
    </div>
</div>

<!--apply new css class to triangles referencing fulfilled activities-->
<!--*** ACTIVITIES WITH QUOTES ("") BREAK THE JS ***-->
<!--also, tell user to select an option (MBS) if none was selected-->
<script>
    let tri = document.getElementsByClassName('tri');

    var mind = "{{ all_daily.daily_mind.0|safe }}";
    var body = "{{ all_daily.daily_body.0|safe }}";
    var soul = "{{ all_daily.daily_soul.0|safe }}";

    let activities = [mind, body, soul];

    for (var i = 0; i < 3; i++)
    {
        if (activities[i])
        {
            tri[i].classList.add("completed_act");
            console.log("hmmm..")
        }
    }

    // activity-submit class addition
    var activitySubmit = document.getElementsByClassName('activity-submit')[0];

    function collapse() {
        activitySubmit.classList.toggle("collapse");
    }
</script>
{% endblock content %}