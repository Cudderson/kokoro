{% extends 'kokoro_app/base.html' %}

{% block content %}
<div class="super-container">
    <div class="request-grid">
        <div class="sent-request-container">
        <span>Sent by {{ request.user }}:</span>
        {% for friendship_request in requests_from_user %}
            <div class="sent-request">
                <div class="request-image">
                    <img src="{{ friendship_request.to_user.profileimage.image.url }}">
                </div>
                <span class="request-message">Pending Request to @{{ friendship_request.to_user }}</span>
                <form class="cancel-request-form" action="{% url 'kokoro_app:cancel_friendship_request_handler' friendship_request=friendship_request.id %}" method="post">
                    {% csrf_token %}
                    <button class="request-btn font-med" type="submit" name="cancel_friendship_request_form">
                        Cancel
                    </button>
                </form>
            </div>
        {% endfor %}
        </div>

        <div class="received-request-container">
        <span>Sent to {{ request.user }}:</span>
        {% for friendship_request in requests_to_user %}
            <div class="received-request">
                <!-- each received request should show: image, username/display_name, buttons -->
                <div class="request-image">
                    <img src="{{ friendship_request.from_user.profileimage.image.url }}">
                </div>
                <span class="request-message">@{{ friendship_request.from_user }} wants to be your friend!</span>
                <!-- form sends the unique id of the user whom sent the friendship request -->
                <form class="accept-request-form" action="{% url 'kokoro_app:accept_friendship_request_handler' sent_by=friendship_request.from_user.id %}" method="post">
                    {% csrf_token %}
                    <button class="request-btn font-med" type="submit" name="accept_friendship_form">
                        Accept
                    </button>
                </form>
                <!-- Decline a friendship request sent to user -->
                <form class="decline-request-form" action="{% url 'kokoro_app:decline_friendship_request_handler' friendship_request=friendship_request.id %}" method="post">
                    {% csrf_token %}
                    <button class="request-btn font-med" type="submit" name="decline_friendship_request_form">
                        Decline
                    </button>
                </form>
                <!-- View Profile of user that sent friendship_request -->
                <form class="profile-request-form" action="{% url 'kokoro_app:profile' %}" method="get">
                    <button class="request-btn font-med" type="submit" name="profile_to_visit" value="{{ friendship_request.from_user.id }}">
                        Profile
                    </button>
                </form>
            </div>
        {% endfor %}
        </div>
    </div>
</div>
<!-- save until request-grid finished
    <h1 style="text-align: center;">{{ request.user }}'s Friendships:</h1>
    <div style="text-align: center;">
        {% for friendship in friendships %}
        <div>
            {{ friendship }}
            <form action="{% url 'kokoro_app:profile' %}" method="get" style="display: inline-block;">
                <button type="submit" name="profile_to_visit" value="{{ friendship.id }}">
                    {{ friendship }}'s Profile
                </button>
            </form>
            <form action="{% url 'kokoro_app:remove_friendship_handler' friendship_to_remove_id=friendship.id %}" method="post" style="display: inline-block;">
                {% csrf_token %}
                <button type="submit" name="remove_friendship_form">
                    Remove Friendship
                </button>
            </form>
        </div>
        {% endfor %}
    </div>
-->
{% endblock content %}